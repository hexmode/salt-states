<?php {%- set data = salt['pillar.get']('accounts:blog', {}) %}
# vi set ai syntax=php

# Managed by Salt Stack, please DO NOT TOUCH, or ALL CHANGES WILL be LOST!

#error_reporting(E_ALL);

## Deployment specific details
{% if salt['grains.get']('level') == 'staging' -%}
$siteTopLevelDomain = 'webplatformstaging.org';
{% else -%}
$siteTopLevelDomain = 'webplatform.org';
{% endif %}

require_once('lib/main.php');

$wpd['memcache_array'] = array('localhost:11211');
$wpd['pagespeed_key'] = "{{ salt['pillar.get']('accounts:blog:secrets:googlepagespeed', '') }}";
$wpd['piwik_url'] = 'https://stats.' . $siteTopLevelDomain . '/';

/**
 * WebPlatform Blog
 *
 * See also:
 *  * http://generatewp.com/wp-config/
 **/

define('WP_HOME',    'http://blog.' . $siteTopLevelDomain);
define('WP_SITEURL', 'http://blog.' . $siteTopLevelDomain . '/wordpress');
define('WP_CONTENT_DIR', $_SERVER['DOCUMENT_ROOT'] . '/wp-content');
define('WP_CONTENT_URL', 'http://blog.' . $siteTopLevelDomain . '/wp-content');
define('VHOST_URL', 'http://blog.' . $siteTopLevelDomain );

## Enforce SSL:
##  * http://www.wpwhitesecurity.com/wordpress-security/definitive-guide-wordpress-ssl-setup/
#define('FORCE_SSL_LOGIN', true);
#define('FORCE_SSL_ADMIN', true);

/**
 * Production friendly settings
 **/
define('DISABLE_WP_CRON', true);  ## This should be set to true, otherwise it might self-hammer the site
define('WP_CACHE', true);
define('WP_POST_REVISIONS', 3);
define('W3TC_EDGE_MODE', true); // Added by W3 Total Cache
define('WP_DEFAULT_THEME', 'webplatform');

#define('DISABLE_CACHE', true);
define('WP_DEBUG_LOG', false);
define('WP_DEBUG', false);

/**
 * Database configuration
 */
define('DB_CHARSET', 'utf8');
define('DB_COLLATE', '');
define('DB_NAME',    '{{ salt['pillar.get']('accounts:blog:db:database', 'wpblog') }}');
define('DB_HOST',    '{{ salt['pillar.get']('accounts:blog:db:hostname', 'localhost') }}');
define('DB_USER',    '{{ salt['pillar.get']('accounts:blog:db:username', 'root') }}');
define('DB_PASSWORD','{{ salt['pillar.get']('accounts:blog:db:password', '') }}');


// Generate new ones https://api.wordpress.org/secret-key/1.1/salt/
define('AUTH_KEY',         '{{ salt['pillar.get']('accounts:blog:secrets:AUTH_KEY', '') }}');
define('SECURE_AUTH_KEY',  '{{ salt['pillar.get']('accounts:blog:secrets:SECURE_AUTH_KEY', '') }}');
define('LOGGED_IN_KEY',    '{{ salt['pillar.get']('accounts:blog:secrets:LOGGED_IN_KEY', '') }}');
define('NONCE_KEY',        '{{ salt['pillar.get']('accounts:blog:secrets:NONCE_KEY', '') }}');
define('AUTH_SALT',        '{{ salt['pillar.get']('accounts:blog:secrets:AUTH_SALT', '') }}');
define('SECURE_AUTH_SALT', '{{ salt['pillar.get']('accounts:blog:secrets:SECURE_AUTH_SALT', '') }}');
define('LOGGED_IN_SALT',   '{{ salt['pillar.get']('accounts:blog:secrets:LOGGED_IN_SALT', '') }}');
define('NONCE_SALT',       '{{ salt['pillar.get']('accounts:blog:secrets:NONCE_SALT', '') }}');

