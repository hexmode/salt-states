127.0.1.1 {{ hostName }}.{{ level }}.wpdn {{ hostName }}
127.0.0.1 localhost

#
# Managed by Salt stack. Do NOT EDIT directly!
#

## Provided by nodes pillar ##
{% for node, args in pillar.get('nodes', {}).items() -%}
{{ args.get('private') }}		{{ node }}.local.wpdn	{{ node }}
{% endfor -%}
## /Provided by nodes pillar ##

{#
 # Data given by `salt['mine.get']('*', 'network.ip_addrs')` looks like this:
 #
 # foo = [('project', ['10.10.10.1']),('foo', ['10.10.10.2'])]
 #
 # To sort the list in alphabetical order based on the node name, we do:
 #
 # foo|sort(attribute=0)
 #
 # To get the list, run from any salt minion:
 #
 #    salt-call mine.get '*' network.ip_addrs grain
 #
 # If data doesnt get updated, use:
 #
 #    salt '*' mine.send network.ip_addrs
 #
 #}
{%- if grains['nodename'] == 'salt' -%}
##  Provided by mine.get network.ip_addrs  ##
{%- for minion,addrs in salt['mine.get']('*', 'network.ip_addrs').items()|sort(attribute=0) %}
{{ addrs[0] }}		{{ minion }}.{{ level }}.wpdn	{{ minion }}
{%- endfor %}
## /Provided by mine.get network.ip_addrs  ##
{%- endif %}

# The following lines are desirable for IPv6 capable hosts
::1 ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
ff02::3 ip6-allhosts

# Managed by Salt stack, appended entries
# START managed hosts -DO-NOT-EDIT---
# END managed hosts

## vim: ai st=4
